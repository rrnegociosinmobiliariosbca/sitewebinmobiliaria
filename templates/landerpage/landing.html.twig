{% extends 'base.html.twig' %}

{% block title %}RR NEGOCIOS INMOBILIARIOS
{% endblock %}

{% block body %}
	<style>
		html,
		body {
			height: 100%;
			margin: 0;
			padding: 0;
		}

		body {
			background-image: url('/img/fondo.jpeg');
			background-attachment: fixed;
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center;
		}

		.content-wrapper {
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			height: 100vh; /* Ocupa toda la altura de la ventana */

		}

		audio {
			;
			/* display: none;Oculta el elemento de audio */
		}
	</style>

	<!-- Contenido principal -->
	<div class="content-wrapper">
		<img src="/img/logo.png" alt="Imagen única" class="img-fluid w-75 mb-4">
		<h6 class=" mb-4 mt-4 text-white text-uppercase">
			Click para continuar
		</h6>
	</div>
<!-- Audio oculto -->
<audio id="inicio-audio" src="/img/bienvenida.mp3" preload="auto"></audio>

<!-- Modal -->
<div class="modal fade" id="audioModal" tabindex="-1" aria-labelledby="audioModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center">
      <div class="modal-body">
        ¡Bienvenido!
      </div>
      <div class="modal-footer justify-content-center">
        <button class="btn btn-danger" id="play-audio-btn">Cerrar</button>
      </div>
    </div>
  </div>
</div>
	<!-- Fin del contenido principal -->
	<script>
  let modalCerrado = false; // Flag para saber si el modal ya fue cerrado

  window.addEventListener('DOMContentLoaded', () => {
    const modalElement = document.getElementById('audioModal');
    const modal = new bootstrap.Modal(modalElement);
    modal.show();

    document.getElementById('play-audio-btn').addEventListener('click', () => {
      document.getElementById('inicio-audio').play().catch(err => {
        console.log("No se pudo reproducir el audio:", err);
      });
      modal.hide();
    });

    // Escuchar cuando el modal ha sido completamente cerrado
    modalElement.addEventListener('hidden.bs.modal', () => {
      modalCerrado = true;
    });
  });

  // Detectar clic en el body para redirigir, pero solo si el modal ya está cerrado
  document.body.addEventListener('click', function () {
    if (modalCerrado) {
      window.location.href = "{{ path('app_buscar') }}";
    }
  });
	</script>
{% endblock %}
